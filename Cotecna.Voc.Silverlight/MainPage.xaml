<UserControl xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"  x:Class="Cotecna.Voc.Silverlight.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"    
    xmlns:local="clr-namespace:Cotecna.Voc.Silverlight"
    d:DesignHeight= "768" d:DesignWidth="1024" Name="Root">

    <UserControl.DataContext>
        <local:MainPageViewModel />
    </UserControl.DataContext>
    <UserControl.Resources>
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <local:OnlineToColorConverter x:Key="CrmsOnlineToColorConverter" OnlineBrush="LawnGreen" />       
        <Storyboard x:Name="HideScreen">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="MessageText">
                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:9.7" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:10" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>
    <Grid Background="{StaticResource Color_ApplicationBackground}" >       
        <toolkit:BusyIndicator IsBusy="{Binding IsBusy}" 
                               BusyContent="{Binding Translations.PleaseWait, Source={StaticResource ResourceWrapper}}">
            <Grid  >
                <Grid.RowDefinitions>
                    <RowDefinition Height="47" />
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!--Wave Line-->
                <Canvas Margin="0,35,0,0" Width="2000" Height="190.847">
                    <Path Width="2000" Height="190.847" StrokeThickness="1.1" Stroke="#ff75d1f6" StrokeMiterLimit="1.0" Data="F1 M 0.483,0.288 C 19.679,32.472 36.095,49.560 110.868,44.082 C 195.349,37.895 222.361,29.141 273.925,13.197 C 351.967,-10.935 393.089,56.609 344.973,45.094 C 299.832,34.290 412.046,-22.195 478.709,31.818 C 521.786,66.723 534.553,47.084 588.689,33.571 C 644.099,19.743 774.868,10.938 879.041,20.048 C 988.980,29.661 1237.360,60.083 1339.244,60.083"/>
                </Canvas>

              
                <!--Top Menus-->
                <Grid Margin="30,0,10,2" Height="35" VerticalAlignment="Bottom" >

                    <Grid.ColumnDefinitions >
                        <ColumnDefinition />
                        <ColumnDefinition  Width="250"/>
                    </Grid.ColumnDefinitions>
                    <ItemsControl VerticalAlignment="Center" HorizontalAlignment="Left" ItemsSource="{Binding TopLevelMenus, Source={StaticResource VocGlobalAccessor}}" 
                              Tag="{Binding TopLevelMenuClicked, Source={StaticResource VocGlobalAccessor}}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <HyperlinkButton Margin="0,0,10,0" Style="{x:Null}" Visibility="{Binding IsVisible, Converter={StaticResource BoolToVisibilityConverter}}" 
                                             Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}, Path=Tag}" CommandParameter="{Binding InnerName}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <Viewbox Height="26">
                                            <ContentControl HorizontalAlignment="Stretch" Content="{Binding ContentSource}"/>
                                        </Viewbox>
                                        <TextBlock Text="{Binding Label}" Foreground="#FF8DB1C8" FontSize="13" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center"  MinWidth="0" Margin="5,0,0,0"
                                               FontFamily="/Cotecna.Silverlight.Controls;component/Fonts/Fonts.zip#DIN"/>
                                    </Grid>
                                </HyperlinkButton>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                    <Image Margin="0,-4,0,0" Grid.Column="1" Source="Assets/Images/Logo_VocIraq_25px.png" VerticalAlignment="Top" Stretch="None" HorizontalAlignment="Left"/>
                    <TextBlock Margin="116,0,0,-9" Grid.Column="1" Text="{Binding Translations._AppVersion, Source={StaticResource ResourceWrapper}}"  HorizontalAlignment="Left" VerticalAlignment="Bottom" FontSize="10" Style="{StaticResource Text_OnDarkBackground}"/>
                    
                </Grid>

                <!--Content-->
                <Grid Grid.Row="1" x:Name="MainContent" >

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition x:Name="ColumnHelp" Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <toolkit:TransitioningContentControl Margin="10,2" x:Name="MainContentControl" 
                                                             HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" />

                        
                    </Grid>
                </Grid>
                <!--Footer-->
                <Grid Height="30" Grid.Row="2"  >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <!--Grid System message-->
                    <Grid  Margin="5,0,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Ellipse Fill="{Binding IsOnline, Converter={StaticResource CrmsOnlineToColorConverter}, Source={StaticResource VocGlobalAccessor}}" StrokeThickness="0" Width="9" Height="9" Margin="0,0,2,0"/>
                        <Path Grid.Column="1" Data="M15.650574,-3.150574 L10.75,1.75 L15.624544,6.6865392" Fill="{StaticResource Color_Blue}" HorizontalAlignment="Left" Margin="0,11" Stretch="Fill" Stroke="{StaticResource Color_LightBlue}" UseLayoutRounding="False" Width="4"/>

                        <!--The message is rendered here-->
                        <Border Grid.Column="1" BorderBrush="{StaticResource Color_LightBlue}" BorderThickness="1" CornerRadius="4" Height="20" Padding="5,0" Margin="3,0,0,0" >
                            <TextBlock x:Name="MessageText" Text="{Binding MessageStatus, Source={StaticResource VocGlobalAccessor}}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" TextTrimming="WordEllipsis" Style="{StaticResource Text_OnDarkBackground}" />
                        </Border>
                        <Path Grid.Column="1" Data="M15.650574,-3.150574 L10.75,1.75 L15.624544,6.6865392" Fill="{StaticResource Color_Blue}" HorizontalAlignment="Left" Margin="1,10,0,10" Stretch="Fill" UseLayoutRounding="False" Width="4" StrokeThickness="0"/>
                    </Grid>

                    <TextBlock Grid.Column="1" Text="{Binding LoggedUser}" VerticalAlignment="Bottom" Margin="10,0,10,4" FontSize="10" Style="{StaticResource Text_OnDarkBackground}" />

                    <!--<Button Padding="12,2" Content="Logout" Grid.Column="3" Style="{StaticResource FooterButton}" Height="20" Command="{Binding LogOut}" />-->

                    <!--Cotecna Logo-->
                    <Viewbox Grid.Column="4" Margin="24,0,5,0" Width="100">
                        <Canvas Width="100" Height="10">
                            <Path Fill="#ffffffff" Data="F1 M 0.000,3.541 C 0.000,0.676 1.608,0.000 4.313,0.000 L 7.840,0.000 C 12.111,0.000 12.666,0.921 12.639,3.688 L 9.639,3.688 L 9.639,3.419 C 9.639,2.717 9.125,2.515 8.232,2.515 L 4.961,2.515 C 3.379,2.515 3.082,3.257 3.082,4.474 L 3.082,5.526 C 3.082,6.946 3.379,7.487 4.799,7.487 L 8.002,7.487 C 9.354,7.487 9.760,7.351 9.760,6.135 L 12.760,6.135 L 12.760,7.054 C 12.760,8.704 12.167,10.000 9.152,10.000 L 4.313,10.000 C 1.608,10.000 0.000,9.325 0.000,6.458 L 0.000,3.541 Z"/>
                            <Path Fill="#ffffffff" Data="F1 M 14.256,3.541 C 14.256,0.676 15.864,0.000 18.568,0.000 L 23.381,0.000 C 26.083,0.000 27.694,0.676 27.694,3.541 L 27.694,6.458 C 27.694,9.325 26.083,10.000 23.381,10.000 L 18.568,10.000 C 15.864,10.000 14.256,9.325 14.256,6.458 L 14.256,3.541 Z M 17.338,5.526 C 17.338,6.946 17.637,7.487 19.055,7.487 L 22.893,7.487 C 24.313,7.487 24.611,6.946 24.611,5.526 L 24.611,4.474 C 24.611,3.257 24.313,2.515 22.730,2.515 L 19.217,2.515 C 17.637,2.515 17.338,3.257 17.338,4.474 L 17.338,5.526 Z"/>
                            <Path Fill="#ffffffff" Data="F1 M 28.988,0.108 L 40.424,0.108 L 40.424,2.540 L 36.206,2.540 L 36.206,9.894 L 33.207,9.894 L 33.207,2.540 L 28.988,2.540 L 28.988,0.108 Z"/>
                            <Path Fill="#ffffffff" Data="F1 M 56.408,3.541 C 56.408,0.676 58.016,0.000 60.720,0.000 L 64.249,0.000 C 68.520,0.000 69.074,0.921 69.047,3.688 L 66.046,3.688 L 66.046,3.419 C 66.046,2.717 65.531,2.515 64.639,2.515 L 61.370,2.515 C 59.787,2.515 59.490,3.257 59.490,4.474 L 59.490,5.526 C 59.490,6.946 59.787,7.487 61.207,7.487 L 64.411,7.487 C 65.762,7.487 66.168,7.351 66.168,6.135 L 69.169,6.135 L 69.169,7.054 C 69.169,8.704 68.572,10.000 65.560,10.000 L 60.720,10.000 C 58.016,10.000 56.408,9.325 56.408,6.458 L 56.408,3.541 Z"/>
                            <Path Fill="#ffffffff" Data="F1 M 70.979,0.108 L 75.630,0.108 L 81.268,7.217 L 81.293,7.217 L 81.293,0.108 L 84.296,0.108 L 84.296,9.894 L 79.646,9.894 L 74.008,2.784 L 73.980,2.784 L 73.980,9.894 L 70.979,9.894 L 70.979,0.108 Z"/>
                            <Path Fill="#ffffffff" Data="F1 M 90.718,0.108 L 94.625,0.108 L 100.007,9.894 L 96.665,9.894 L 95.735,8.163 L 89.651,8.163 L 88.772,9.894 L 85.420,9.894 L 90.718,0.108 Z M 90.774,6.054 L 94.611,6.054 L 92.666,2.378 L 90.774,6.054 Z"/>
                            <Path Fill="#ffffffff" Data="F1 M 46.693,10.000 L 54.603,10.000 L 54.603,9.987 L 54.603,7.495 L 54.603,7.487 L 42.465,7.487 C 42.828,9.490 44.346,10.000 46.693,10.000"/>
                            <Path Fill="#ffffffff" Data="F1 M 46.693,0.000 C 44.346,0.000 42.828,0.511 42.465,2.515 L 54.603,2.515 L 54.603,0.019 L 54.603,0.000 L 46.693,0.000 Z"/>
                            <Path Fill="#ffffffff" Data="F1 M 51.564,4.991 C 51.564,5.628 51.049,6.144 50.411,6.144 L 41.663,6.144 C 41.026,6.144 40.510,5.628 40.510,4.991 C 40.510,4.354 41.026,3.839 41.663,3.839 L 50.411,3.839 C 51.049,3.839 51.564,4.354 51.564,4.991"/>
                        </Canvas>
                    </Viewbox>

                </Grid>
            </Grid>
        </toolkit:BusyIndicator>
    </Grid>
</UserControl>
